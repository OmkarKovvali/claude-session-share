---
phase: 01-foundation
plan: 01
type: execute
---

<objective>
Set up TypeScript project foundation with MCP server scaffold and stdio transport.

Purpose: Establish the core structure and tooling that all features depend on - a working MCP server that can be extended with session sharing tools.
Output: Working TypeScript project with MCP server scaffold, build pipeline, and test framework.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Project Context:**
- Greenfield project - no existing code
- Building an MCP server for Claude Code session sharing
- Must integrate seamlessly as a standalone npm package
- Standard TypeScript/MCP setup (no novel patterns needed)

**Constraints:**
- Must work with existing Claude Code installations without modification
- MCP context footprint must be minimal (<200 tokens for tool definitions)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize TypeScript project with MCP dependencies</name>
  <files>package.json, tsconfig.json, .gitignore</files>
  <action>
    Create package.json with:
    - name: "claude-session-share"
    - type: "module" (ES modules)
    - dependencies: @modelcontextprotocol/sdk latest
    - devDependencies: typescript, @types/node
    - scripts: "build": "tsc", "test": "vitest" (or jest)
    - bin field pointing to compiled server entry point for CLI usage

    Create tsconfig.json with:
    - strict: true
    - target: "ES2022"
    - module: "Node16"
    - outDir: "dist"
    - include: ["src/**/*"]

    Create .gitignore with node_modules/, dist/, .env patterns.

    Run npm install to verify setup.
  </action>
  <verify>npm install succeeds without errors, node_modules exists, tsc --version works</verify>
  <done>package.json valid, dependencies installed, TypeScript configured</done>
</task>

<task type="auto">
  <name>Task 2: Create MCP server scaffold with stdio transport</name>
  <files>src/index.ts</files>
  <action>
    Create src/index.ts with:
    - Import Server and StdioServerTransport from @modelcontextprotocol/sdk/server/index.js
    - Create Server instance with name "claude-session-share", version "0.1.0"
    - Set up stdio transport
    - Register server capabilities (tools capability - we'll add actual tools in later phases)
    - Add placeholder comment for future tool handlers (share/import tools come in Phase 2+)
    - Start server with transport

    Follow MCP SDK patterns for stdio transport (standard documented approach).
    Do NOT implement actual share/import tools yet - just scaffold.
  </action>
  <verify>npm run build succeeds, dist/index.js exists and is valid JavaScript</verify>
  <done>Server compiles without errors, exports valid MCP server with stdio transport</done>
</task>

<task type="auto">
  <name>Task 3: Add development tooling and basic tests</name>
  <files>vitest.config.ts, src/__tests__/index.test.ts</files>
  <action>
    Set up Vitest (preferred over Jest for ESM + TypeScript):
    - Install vitest as dev dependency
    - Create vitest.config.ts with test globals enabled
    - Create src/__tests__/index.test.ts with smoke test that imports the server module successfully
    - Test should verify the module exports without errors (not runtime behavior - that requires MCP client setup)
    - Update package.json test script to "vitest run"

    Use Vitest instead of Jest - better ESM support, faster, simpler config for TypeScript.
  </action>
  <verify>npm test runs and passes, test output shows 1 passing test</verify>
  <done>Test framework configured, smoke test passes, npm test works</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm test` passes all tests
- [ ] No TypeScript errors
- [ ] dist/ directory contains compiled JavaScript
- [ ] Server module can be imported without errors
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No errors or warnings introduced
- TypeScript project builds cleanly
- MCP server scaffold is ready for tool implementation
- Test framework operational
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`:

# Phase 1 Plan 1: Foundation Summary

**[One-liner describing what was built]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]
- [Key outcome 3]

## Files Created/Modified

- `path/to/file.ts` - Description
- `path/to/another.ts` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

[If more plans in this phase: "Ready for 01-02-PLAN.md"]
[If phase complete: "Phase 1 complete, ready for Phase 2"]
</output>
